{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"wp.i18n\"","webpack:///../node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/@babel/runtime/helpers/inherits.js","webpack:///../node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///external \"wp.components\"","webpack:///external \"wp.data\"","webpack:///external \"wp.element\"","webpack:///../node_modules/@babel/runtime/helpers/typeof.js","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///external \"lodash\"","webpack:///external \"wp.compose\"","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///../node_modules/classnames/index.js","webpack:///./js/utils/data.ts","webpack:///external \"wp.editor\"","webpack:///external \"wp.blocks\"","webpack:///../node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///../node_modules/uuid/v4.js","webpack:///./js/utils/editor.ts","webpack:///../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///../node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///external \"CSL\"","webpack:///./js/utils/cache.ts","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///./js/components/count-icon/index.tsx","webpack:///./js/gutenberg/components/sidebar-item-list/index.tsx","webpack:///./js/gutenberg/components/sidebar-item-list/style.scss?6d8e","webpack:///./js/utils/csl.ts","webpack:///./js/gutenberg/components/reference-item/index.tsx","webpack:///./js/components/count-icon/style.scss?7d32","webpack:///./js/gutenberg/components/reference-item/style.scss?2bd1","webpack:///./js/components/textarea-autosize/index.tsx","webpack:///./js/components/textarea-autosize/style.scss?a75d","webpack:///./js/utils/processor.ts","webpack:///./js/gutenberg/blocks/static-bibliography/style.scss?67d5","webpack:///./js/gutenberg/blocks/bibliography/style.scss?9c6c","webpack:///./js/gutenberg/blocks/bibliography/edit.tsx","webpack:///./js/gutenberg/blocks/bibliography/save.tsx","webpack:///./js/gutenberg/blocks/bibliography/index.ts","webpack:///./js/gutenberg/blocks/footnotes/edit.tsx","webpack:///./js/gutenberg/blocks/footnotes/save.tsx","webpack:///./js/gutenberg/blocks/footnotes/index.ts","webpack:///./js/gutenberg/blocks/static-bibliography/edit.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/save.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/index.tsx","webpack:///./js/gutenberg/blocks/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","wp","i18n","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_typeof","assertThisInitialized","self","subClass","superClass","constructor","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","this","args","arguments","apply","err","undefined","components","data","element","_typeof2","obj","iterator","arrayWithHoles","iterableToArrayLimit","nonIterableRest","lodash","compose","_extends","assign","source","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","argType","push","Array","isArray","inner","join","default","clone","JSON","parse","stringify","firstTruthyValue","paths","fallback","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","path","val","lodash__WEBPACK_IMPORTED_MODULE_1___default","a","return","swapWith","b","list","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","item","splice","concat","slice","editor","blocks","_setPrototypeOf","rng","bytesToUuid","options","buf","offset","rnds","random","ii","INVALID_BLOCK_TYPES","getEditorDOM","excludeInvalid","doc","document","createElement","filteredBlocks","_wordpress_data__WEBPACK_IMPORTED_MODULE_2__","getBlocksForSerialization","filter","block","includes","isValid","innerHTML","_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__","getEditedPostContent","parseBibAttributes","_ref","entryspacing","hangingindent","maxoffset","linespacing","secondFieldAlign","data-entryspacing","data-hangingindent","data-maxoffset","data-linespacing","data-second-field-align","stripListItem","container","child","querySelector","Error","content","toRemove","children","el","classList","contains","outerHTML","forEach","removeChild","trim","arr2","iter","toString","from","_arr","_n","_d","_e","_s","_i","ReferenceError","CSL","AbstractCache","_this","daysTilExpiration","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6___default","PREFIX","VERSION","KEY","_cache","storageIsAvailable","top","localStorage","createFallbackStorage","ITEM_KEY","EXPIRES","Date","now","keys","k","startsWith","removeItem","cache","lodash__WEBPACK_IMPORTED_MODULE_8___default","omit","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_5___default","storage","window","setItem","_a","_value","Map","size","clear","getItem","index","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_4___default","delete","set","expires","localeCache","_AbstractCache","_class","_this2","parser","DOMParser","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_7___default","_fetchItem","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default","regeneratorRuntime","mark","_callee","style","xml","styleNode","localeId","response","locale","wrap","_context","prev","parseFromString","getAttribute","fetch","sent","ok","statusText","text","abrupt","stop","_x","styleCache","_AbstractCache2","_class2","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default","_fetchItem2","_callee2","styleId","cached","_context2","_x2","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","Math","byteToHex","substr","bth","__webpack_exports__","CountIcon","_style_scss__WEBPACK_IMPORTED_MODULE_0__","_style_scss__WEBPACK_IMPORTED_MODULE_0___default","count","React","className","icon","items","onItemClick","onItemDoubleClick","renderItem","_ref$selectedItems","selectedItems","role","aria-multiselectable","map","id","aria-selected","onClick","onDoubleClick","csl_CSLDate","CSLDate","classCallCheck_default","createClass_default","date","raw","getUTCFullYear","external_lodash_default","external_wp_i18n_","csl_CSLPerson","CSLPerson","people","family","given","literal","Boolean","ReferenceItem","Fragment","title","author","style_default","authors","getNames","getYear","issued","Textarea","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","ref","inputRef","_wordpress_element__WEBPACK_IMPORTED_MODULE_6__","handleBlur","e","currentTarget","handleChange","onBlur","state","height","scrollHeight","onChange","textarea","current","offsetHeight","clientHeight","setState","__rest","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default","classnames__WEBPACK_IMPORTED_MODULE_7___default","_style_scss__WEBPACK_IMPORTED_MODULE_8___default","rows","defaultProps","Processor","sys","retrieveItem","_wordpress_data__WEBPACK_IMPORTED_MODULE_3__","getItemById","retrieveLocale","lang","utils_cache__WEBPACK_IMPORTED_MODULE_6__","engine","citeproc__WEBPACK_IMPORTED_MODULE_4__","opt","development_extensions","wrap_url_and_doi","citations","rebuildProcessorState","_ref2","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","html","sortedItems","registry","citationById","_ref3","makeBibliography","meta","_data","_data2","lodash__WEBPACK_IMPORTED_MODULE_5___default","zipWith","flatten","entry_ids","citationreg","buttonList","row","heading","summary","edit","BibliographyEdit","maybeRenderHeading","_this$props","_this$props$attribute","attributes","headingAlign","headingLevel","isToggleable","isSelected","setAttributes","Tag","classnames_default","abt-bibliography__heading","textAlign","textarea_autosize","placeholder","_this$props2","containerAttrs","external_wp_editor_","external_wp_components_","controls","toConsumableArray_default","level","isActive","subscript","align","label","checked","help","toggleable","aria-label","extends_default","Content","tagName","external_wp_element_","save","headingProps","bibliography","category","description","type","attribute","selector","query","supports","inserter","multiple","reusable","transforms","transform","node","body","textContent","re","dataset","nodeName","headingMatch","exec","parseInt","external_wp_blocks_","footnotes_edit","footnotes_save","footnotes","edit_Edit","Edit","makeItemMover","dir","utils_data","addItem","asyncToGenerator_default","references","styleXml","processor","newItem","find","fetchItem","external_wp_data_","getStyle","utils_processor","parseCitations","citationID","citationItems","properties","noteIndex","_this$props3","_this$props3$attribut","orderedList","ListTag","count_icon","initialOpen","sidebar_item_list","reference_item","edit_LiveItem","onMoveUp","onRemove","onMoveDown","data-id","static_bibliography_style_default","disabled","static_bibliography_edit","external_wp_compose_","select","_ref4","existingIds","_ref5","getSortedItems","static_bibliography_save","static_bibliography","keywords","anchor","v4_default"],"mappings":"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","file":"bundle/editor-blocks.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 177);\n","module.exports = wp.i18n;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","module.exports = wp.components;","module.exports = wp.data;","module.exports = wp.element;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = lodash;","module.exports = wp.compose;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import _ from 'lodash';\n\ntype Widen<T> = T extends string ? string : T extends number ? number : T;\n\nexport function clone<T>(data: T): T {\n    if (data === undefined) {\n        return data;\n    }\n    return JSON.parse(JSON.stringify(data));\n}\n\nexport function firstTruthyValue<T extends Record<string, any>, U>(\n    obj: T,\n    paths: string[],\n    fallback: Widen<U>,\n): Widen<U>;\nexport function firstTruthyValue<T extends Record<string, any>, U>(\n    obj: T,\n    paths: string[],\n): U | undefined;\nexport function firstTruthyValue<T extends Record<string, any>, U>(\n    obj: T,\n    paths: string[],\n    fallback?: Widen<U>,\n) {\n    for (const path of paths) {\n        const val = _.get(obj, path);\n        if (val) {\n            return val;\n        }\n    }\n    return fallback;\n}\n\nexport function swapWith<T>(arr: T[], a: number, b: number): T[] {\n    const list = [...arr];\n    const item = list.splice(a, 1);\n    return [...list.slice(0, b), ...item, ...list.slice(b)];\n}\n","module.exports = wp.editor;","module.exports = wp.blocks;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { Block, serialize } from '@wordpress/blocks';\nimport { select } from '@wordpress/data';\nimport _ from 'lodash';\n\nimport Processor from 'utils/processor';\n\nconst INVALID_BLOCK_TYPES = ['core/freeform', 'core/html'];\n\nexport function getEditorDOM(excludeInvalid: boolean = false): HTMLDivElement {\n    const doc = document.createElement('div');\n    if (excludeInvalid) {\n        const filteredBlocks = select<Block[]>('core/editor')\n            .getBlocksForSerialization()\n            .filter(\n                block =>\n                    !INVALID_BLOCK_TYPES.includes(block.name) && block.isValid,\n            );\n        doc.innerHTML = serialize(filteredBlocks);\n    } else {\n        doc.innerHTML = select<string>('core/editor').getEditedPostContent();\n    }\n    return doc;\n}\n\nexport function parseBibAttributes({\n    entryspacing,\n    hangingindent,\n    maxoffset,\n    linespacing,\n    secondFieldAlign,\n}: { [k in keyof Processor.BibMeta]?: string }) {\n    return {\n        ...(entryspacing\n            ? { 'data-entryspacing': `${entryspacing}` }\n            : undefined),\n        ...(hangingindent\n            ? { 'data-hangingindent': `${hangingindent}` }\n            : undefined),\n        ...(maxoffset ? { 'data-maxoffset': `${maxoffset}` } : undefined),\n        ...(linespacing ? { 'data-linespacing': `${linespacing}` } : undefined),\n        ...(secondFieldAlign\n            ? { 'data-second-field-align': secondFieldAlign }\n            : undefined),\n    };\n}\n\nexport function stripListItem(item: Element | string): string {\n    if (typeof item === 'string') {\n        const container = document.createElement('div');\n        container.innerHTML = item;\n        const child = container.querySelector('.csl-entry');\n        if (child) {\n            item = child;\n        } else {\n            throw new Error(\n                'Outer HTML of item must be a div with className \"csl-entry\"',\n            );\n        }\n    }\n    const content = item;\n    let toRemove: Element[] = [];\n    for (const el of item.children) {\n        if (el.classList.contains('csl-indent')) {\n            break;\n        }\n        if (el.classList.contains('csl-left-margin')) {\n            toRemove = [...toRemove, el];\n            continue;\n        }\n        if (el.classList.contains('csl-right-inline')) {\n            el.outerHTML = el.innerHTML;\n        }\n    }\n    toRemove.forEach(el => content.removeChild(el));\n    return content.innerHTML.trim();\n}\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","module.exports = CSL;","import _ from 'lodash';\n\ninterface CacheJSON<T> {\n    [k: string]: {\n        expires: number;\n        data: Record<string, T>;\n    };\n}\n\ninterface StorageFallback extends Storage {\n    _value: Map<string, string>;\n}\n\nabstract class AbstractCache<T> {\n    private readonly PREFIX = 'ABT_CACHE_';\n    private readonly VERSION = 'v1.0';\n    private readonly EXPIRES: number;\n    private readonly ITEM_KEY: string;\n    private readonly KEY = `${this.PREFIX}${this.VERSION}`;\n    private readonly _cache = this.storageIsAvailable()\n        ? top.localStorage\n        : this.createFallbackStorage();\n\n    constructor(key: string, daysTilExpiration: number = 30) {\n        const ONE_DAY = 86400000;\n        this.ITEM_KEY = key;\n        this.EXPIRES = Date.now() + ONE_DAY * daysTilExpiration;\n        const { KEY, PREFIX } = this;\n\n        // Purge old cache versions\n        Object.keys(this._cache)\n            .filter(k => k.startsWith(PREFIX) && k !== KEY)\n            .forEach(k => this._cache.removeItem(k));\n    }\n\n    abstract async fetchItem(key: string): Promise<T>;\n\n    getItem(key: string): T | null {\n        return this.cache[key] || null;\n    }\n    removeItem(key: string): void {\n        this.cache = _.omit(this.cache, key);\n    }\n    setItem(key: string, value: T): void {\n        this.cache = {\n            ...this.cache,\n            [key]: value,\n        };\n    }\n\n    private get cache(): Record<string, T> {\n        const { EXPIRES: expires, ITEM_KEY, KEY } = this;\n        const value: CacheJSON<T> = JSON.parse(\n            this._cache.getItem(KEY) || '{}',\n        );\n        let item = value[ITEM_KEY];\n        if (!item || item.expires < Date.now()) {\n            item = {\n                expires,\n                data: {},\n            };\n            this._cache.setItem(\n                KEY,\n                JSON.stringify({\n                    ...value,\n                    [ITEM_KEY]: { ...item },\n                }),\n            );\n        }\n        return { ...item.data };\n    }\n    private set cache(data: Record<string, T>) {\n        const { ITEM_KEY, KEY } = this;\n        const value: CacheJSON<T> = JSON.parse(\n            this._cache.getItem(KEY) || '{}',\n        );\n        const item = value[ITEM_KEY];\n        this._cache.setItem(\n            KEY,\n            JSON.stringify({ ...value, [ITEM_KEY]: { ...item, data } }),\n        );\n    }\n\n    private storageIsAvailable(): boolean {\n        const TEST_KEY = '__storage_test__';\n        try {\n            const storage = window.localStorage;\n            storage.setItem(TEST_KEY, 'test');\n            storage.removeItem(TEST_KEY);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    private createFallbackStorage(): StorageFallback {\n        return {\n            _value: new Map(),\n            get length() {\n                return this._value.size;\n            },\n            clear() {\n                this._value.clear();\n            },\n            getItem(key) {\n                return this._value.get(key) || null;\n            },\n            key(index) {\n                return [...this._value.keys()][index] || null;\n            },\n            removeItem(key) {\n                this._value.delete(key);\n            },\n            setItem(key, value) {\n                this._value.set(key, value);\n            },\n        };\n    }\n}\n\nexport const localeCache = new class extends AbstractCache<string> {\n    private parser = new DOMParser();\n\n    async fetchItem(style: string): Promise<string> {\n        const xml = this.parser.parseFromString(style, 'application/xml');\n        const styleNode = xml.querySelector('style');\n        if (xml.querySelector('parsererror')) {\n            throw new Error('Invalid style XML');\n        }\n        if (!styleNode) {\n            throw new Error('CSL style is not valid');\n        }\n        const localeId = styleNode.getAttribute('default-locale') || 'en-US';\n        const response = await fetch(\n            `https://raw.githubusercontent.com/citation-style-language/locales/master/locales-${localeId}.xml`,\n        );\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        const locale = await response.text();\n        this.setItem(localeId, locale);\n        return locale;\n    }\n}('locales');\n\nexport const styleCache = new class extends AbstractCache<string> {\n    async fetchItem(styleId: string): Promise<string> {\n        const cached = this.getItem(styleId);\n        if (cached !== null) {\n            return cached;\n        }\n        const response = await fetch(\n            `https://raw.githubusercontent.com/citation-style-language/styles/master/${styleId}.csl`,\n        );\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        const style = await response.text();\n        this.setItem(styleId, style);\n        return style;\n    }\n}('styles');\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import styles from './style.scss';\n\ninterface Props {\n    count: number;\n}\n\nexport default function CountIcon({ count }: Props) {\n    return <span className={styles.icon}>{count}</span>;\n}\n","import { ReactNode } from '@wordpress/element';\n\nimport styles from './style.scss';\n\nnamespace SidebarItemList {\n    export interface Props<T> {\n        items: ReadonlyArray<T>;\n        selectedItems?: ReadonlyArray<string>;\n        renderItem(item: Partial<T>): ReactNode;\n        onItemClick?(id: string): void;\n        onItemDoubleClick?(id: string): void;\n    }\n}\n\nfunction SidebarItemList<T extends { id: string }>({\n    items,\n    onItemClick,\n    onItemDoubleClick,\n    renderItem,\n    selectedItems = [],\n}: SidebarItemList.Props<T>) {\n    return (\n        <div className={styles.list} role=\"listbox\" aria-multiselectable={true}>\n            {items.map(item => (\n                <div\n                    key={item.id}\n                    className={styles.item}\n                    role=\"option\"\n                    aria-selected={selectedItems.includes(item.id)}\n                    onClick={() => onItemClick && onItemClick(item.id)}\n                    onDoubleClick={() =>\n                        onItemDoubleClick && onItemDoubleClick(item.id)\n                    }\n                >\n                    {renderItem(item)}\n                </div>\n            ))}\n        </div>\n    );\n}\n\nexport default SidebarItemList;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"style__list___sXSVw\",\"item\":\"style__item___3Ltyn\"};","import { _x } from '@wordpress/i18n';\nimport _ from 'lodash';\n\nexport abstract class CSLDate {\n    static getYear(date?: CSL.Date): string | number {\n        if (date && date.raw) {\n            return new Date(date.raw).getUTCFullYear();\n        }\n        return _.get(\n            date,\n            '[date-parts][0][0]',\n            _x(\n                'n.d.',\n                'Abbreviation for \"no date\"',\n                'academic-bloggers-toolkit',\n            ),\n        );\n    }\n}\n\nexport abstract class CSLPerson {\n    static getNames(people: CSL.Person[], count?: number): string {\n        return (\n            people\n                .slice(0, count)\n                .map(({ family, given, literal }) => {\n                    if (literal) {\n                        return literal;\n                    }\n                    if (family) {\n                        return `${family} ${given ? given[0] : ''}`.trim();\n                    }\n                    return '';\n                })\n                .filter(Boolean)\n                .join(', ') + '.'\n        );\n    }\n}\n","import { _x } from '@wordpress/i18n';\n\nimport { CSLDate, CSLPerson } from 'utils/csl';\nimport { firstTruthyValue } from 'utils/data';\n\nimport styles from './style.scss';\n\nexport default function ReferenceItem(item: CSL.Data) {\n    return (\n        <>\n            <strong>{item.title}</strong>\n            {item.author && item.author.length > 0 && (\n                <div className={styles.authors}>\n                    {CSLPerson.getNames(item.author, 3)}\n                </div>\n            )}\n            <div>\n                <i>\n                    {firstTruthyValue(\n                        item,\n                        [\n                            'journalAbbreviation',\n                            'container-title-short',\n                            'container-title',\n                            'publisher',\n                        ],\n\n                        _x(\n                            'n.p.',\n                            'Abbreviation for \"no publisher\"',\n                            'academic-bloggers-toolkit',\n                        ),\n                    )}\n                </i>\n                <span>{CSLDate.getYear(item.issued)}</span>\n            </div>\n        </>\n    );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"style__icon___S3vp9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authors\":\"style__authors___3xZGF\"};","import {\n    ChangeEvent,\n    ChangeEventHandler,\n    Component,\n    createRef,\n    FocusEvent,\n    FocusEventHandler,\n    HTMLProps,\n    RefObject,\n} from '@wordpress/element';\nimport classNames from 'classnames';\n\nimport styles from './style.scss';\n\ninterface State {\n    offset: number;\n}\n\ninterface Props extends HTMLProps<HTMLTextAreaElement> {\n    onChange: ChangeEventHandler<HTMLTextAreaElement>;\n    onBlur: FocusEventHandler<HTMLTextAreaElement>;\n    inputRef?: RefObject<HTMLTextAreaElement>;\n}\n\nexport default class Textarea extends Component<Props, State> {\n    static defaultProps = {\n        onBlur: () => void 0,\n        onChange: () => void 0,\n    };\n\n    private ref = this.props.inputRef || createRef<HTMLTextAreaElement>();\n\n    componentDidMount() {\n        const { current: textarea } = this.ref;\n        if (!textarea) {\n            return;\n        }\n        const offset = textarea.offsetHeight - textarea.clientHeight;\n        this.setState({ offset });\n        textarea.style.height = 'auto';\n        textarea.style.height = `${textarea.scrollHeight + offset}px`;\n    }\n\n    render() {\n        const { className, ...props } = this.props;\n        return (\n            <textarea\n                {...props}\n                className={classNames(styles.textarea, className)}\n                ref={this.ref}\n                rows={1}\n                onBlur={this.handleBlur}\n                onChange={this.handleChange}\n            />\n        );\n    }\n\n    private handleBlur = (e: FocusEvent<HTMLTextAreaElement>) => {\n        e.currentTarget.value = e.currentTarget.value.trim();\n        this.handleChange(e);\n        this.props.onBlur(e);\n    };\n\n    private handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n        const { offset } = this.state;\n        e.currentTarget.style.height = 'auto';\n        e.currentTarget.style.height = `${e.currentTarget.scrollHeight +\n            offset}px`;\n        this.props.onChange(e);\n    };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"style__textarea___g5DyY\"};","import { select } from '@wordpress/data';\nimport { Bibliography as RawBib, Bibmeta, Citation, Engine } from 'citeproc';\nimport _ from 'lodash';\n\nimport { localeCache } from 'utils/cache';\n\nnamespace Processor {\n    export interface BibItem {\n        content: string;\n        id: string;\n    }\n\n    export type BibMeta = Partial<\n        Pick<\n            Bibmeta,\n            'entryspacing' | 'hangingindent' | 'linespacing' | 'maxoffset'\n        > & {\n            secondFieldAlign: Bibmeta['second-field-align'];\n        }\n    >;\n\n    export interface Bibliography {\n        items: BibItem[];\n        meta: BibMeta;\n    }\n\n    export interface CitationMeta {\n        /**\n         * ID of the citation HTMLElement.\n         */\n        id: string;\n        /**\n         * Parsed citation HTML to set as the citation HTMLElement innerHTML.\n         */\n        html: string;\n        /**\n         * A JSON stringified list of the sorted item ids in the citation.\n         */\n        sortedItems: string;\n    }\n}\nclass Processor {\n    private static instance: Processor | null = null;\n    private style!: string;\n    private engine!: Engine;\n\n    private sys: Engine['sys'] = {\n        retrieveItem(id: string): CSL.Data {\n            const item = select('abt/data').getItemById(id);\n            if (!item) {\n                throw new Error(\n                    `CSL Data could not be found for item ID \"${id}\"`,\n                );\n            }\n            return item;\n        },\n        retrieveLocale(lang: string) {\n            const locale = localeCache.getItem(lang);\n            if (!locale) {\n                throw new Error(\n                    `Requested locale \"${lang}\" was not prefetched`,\n                );\n            }\n            return locale;\n        },\n    };\n\n    constructor(style: string) {\n        const { instance } = Processor;\n        if (instance) {\n            if (instance.style !== style) {\n                instance.style = style;\n                instance.engine = new Engine(instance.sys, instance.style);\n                instance.engine.opt.development_extensions.wrap_url_and_doi = true;\n            }\n            return instance;\n        } else {\n            Processor.instance = this;\n            this.style = style;\n            this.engine = new Engine(this.sys, this.style);\n            this.engine.opt.development_extensions.wrap_url_and_doi = true;\n        }\n    }\n\n    parseCitations(citations: Citation[]): Processor.CitationMeta[] {\n        return this.engine\n            .rebuildProcessorState(citations)\n            .map(([id, , html]) => {\n                const sortedItems = JSON.stringify(\n                    this.registry.citationById[id].sortedItems.map(\n                        ([ref]) => ref.id,\n                    ),\n                );\n                return {\n                    id,\n                    html,\n                    sortedItems,\n                };\n            });\n    }\n\n    get bibliography(): Processor.Bibliography {\n        let data: RawBib | false;\n        try {\n            data = this.engine.makeBibliography();\n            if (!data) {\n                return { items: [], meta: {} };\n            }\n        } catch {\n            return { items: [], meta: {} };\n        }\n        const [meta, html] = data;\n        const {\n            entryspacing,\n            hangingindent,\n            linespacing,\n            maxoffset,\n            ['second-field-align']: secondFieldAlign,\n        } = meta;\n        return {\n            meta: {\n                entryspacing,\n                hangingindent,\n                linespacing,\n                maxoffset,\n                secondFieldAlign: secondFieldAlign\n                    ? secondFieldAlign\n                    : undefined,\n            },\n            items: _.zipWith(\n                _.flatten(meta.entry_ids),\n                html,\n                (id, content) => ({\n                    id,\n                    content,\n                }),\n            ),\n        };\n    }\n\n    private get registry() {\n        return this.engine.registry.citationreg;\n    }\n}\n\nexport default Processor;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"style__item___x_svo\",\"buttonList\":\"style__button-list___D2Txs\",\"row\":\"style__row___zDq5B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heading\":\"style__heading___2dqtH\",\"summary\":\"style__summary___1Srnv\"};","import { BlockEditProps } from '@wordpress/blocks';\nimport { PanelBody, ToggleControl, Toolbar } from '@wordpress/components';\nimport {\n    AlignmentToolbar,\n    InspectorControls,\n    RichText,\n} from '@wordpress/editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport classNames from 'classnames';\n\nimport TextareaAutosize from 'components/textarea-autosize';\nimport { parseBibAttributes } from 'utils/editor';\n\nimport { Attributes } from './';\nimport styles from './style.scss';\n\ntype HeadingType = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\nclass BibliographyEdit extends Component<BlockEditProps<Attributes>> {\n    render() {\n        const { attributes, setAttributes } = this.props;\n        const {\n            heading,\n            headingAlign,\n            headingLevel,\n            isToggleable,\n            items,\n        } = attributes;\n        const containerAttrs = parseBibAttributes(attributes);\n        return (\n            <>\n                <InspectorControls>\n                    <PanelBody\n                        title={__(\n                            'Bibliography Settings',\n                            'academic-bloggers-toolkit',\n                        )}\n                    >\n                        <p>\n                            {__('Heading Level', 'academic-bloggers-toolkit')}\n                        </p>\n                        <Toolbar\n                            controls={[...Array(6).keys()].map(level => ({\n                                icon: 'heading',\n                                title: `${__(\n                                    'Heading',\n                                    'academic-bloggers-toolkit',\n                                )} ${level + 1}`,\n                                isActive: level + 1 === headingLevel,\n                                onClick: () =>\n                                    setAttributes({ headingLevel: level + 1 }),\n                                subscript: `${level + 1}`,\n                            }))}\n                        />\n                        <p>\n                            {__(\n                                'Heading Alignment',\n                                'academic-bloggers-toolkit',\n                            )}\n                        </p>\n                        <AlignmentToolbar\n                            value={headingAlign}\n                            onChange={align =>\n                                setAttributes({ headingAlign: align })\n                            }\n                        />\n                        <ToggleControl\n                            label={__(\n                                'Enable toggle',\n                                'academic-bloggers-toolkit',\n                            )}\n                            checked={isToggleable}\n                            help={__(\n                                'Toggle mode can only be enabled if the bibliography has a heading.',\n                                'academic-bloggers-toolkit',\n                            )}\n                            onChange={toggleable =>\n                                heading &&\n                                setAttributes({ isToggleable: toggleable })\n                            }\n                        />\n                    </PanelBody>\n                </InspectorControls>\n                <section\n                    className=\"abt-bibliography\"\n                    role=\"region\"\n                    aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n                >\n                    {isToggleable && (\n                        <details>\n                            <summary className={styles.summary}>\n                                {this.maybeRenderHeading()}\n                            </summary>\n                            <ol\n                                className=\"abt-bibliography__body\"\n                                {...containerAttrs}\n                            >\n                                {items.map(({ content, id }) => (\n                                    <RichText.Content<'li'>\n                                        key={id}\n                                        tagName=\"li\"\n                                        id={id}\n                                        value={content}\n                                    />\n                                ))}\n                            </ol>\n                        </details>\n                    )}\n                    {!isToggleable && (\n                        <>\n                            {this.maybeRenderHeading()}\n                            <ol\n                                className=\"abt-bibliography__body\"\n                                {...containerAttrs}\n                            >\n                                {items.map(({ content, id }) => (\n                                    <RichText.Content<'li'>\n                                        key={id}\n                                        tagName=\"li\"\n                                        id={id}\n                                        value={content}\n                                    />\n                                ))}\n                            </ol>\n                        </>\n                    )}\n                </section>\n            </>\n        );\n    }\n\n    private maybeRenderHeading = () => {\n        const {\n            attributes: { heading, headingAlign, headingLevel, isToggleable },\n            isSelected,\n            setAttributes,\n        } = this.props;\n        if (!isSelected && !heading) {\n            return null;\n        }\n        const Tag = `h${headingLevel}` as HeadingType;\n        return (\n            <Tag\n                className={classNames(\n                    {\n                        'abt-bibliography__heading': !isToggleable,\n                    },\n                    styles.heading,\n                )}\n                style={{ textAlign: headingAlign }}\n            >\n                {isSelected && (\n                    <TextareaAutosize\n                        placeholder={__(\n                            'Write heading...',\n                            'academic-bloggers-toolkit',\n                        )}\n                        value={heading}\n                        onChange={({ currentTarget: { value } }) => {\n                            setAttributes({\n                                heading: value,\n                            });\n                        }}\n                        onBlur={() =>\n                            !heading && setAttributes({ isToggleable: false })\n                        }\n                    />\n                )}\n                {!isSelected && heading}\n            </Tag>\n        );\n    };\n}\n\nexport default BibliographyEdit;\n","import { BlockSaveProps } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport { parseBibAttributes } from 'utils/editor';\n\nimport { Attributes } from './';\n\ntype HeadingType = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\nclass BibliographySave extends Component<BlockSaveProps<Attributes>> {\n    render() {\n        const {\n            heading,\n            headingLevel,\n            isToggleable,\n            items,\n            headingAlign: textAlign,\n        } = this.props.attributes;\n        const containerAttrs = parseBibAttributes(this.props.attributes);\n        const Tag = `h${headingLevel}` as HeadingType;\n        const headingProps = textAlign ? { style: { textAlign } } : {};\n        if (heading && isToggleable) {\n            return (\n                <section\n                    className=\"abt-bibliography\"\n                    role=\"region\"\n                    aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n                >\n                    <details>\n                        <summary>\n                            <Tag\n                                {...headingProps}\n                                className=\"abt-bibliography__heading\"\n                            >\n                                {heading}\n                            </Tag>\n                        </summary>\n                        <ol\n                            className=\"abt-bibliography__body\"\n                            {...containerAttrs}\n                        >\n                            {items.map(({ content, id }) => (\n                                <RichText.Content<'li'>\n                                    key={id}\n                                    tagName=\"li\"\n                                    id={id}\n                                    value={content}\n                                />\n                            ))}\n                        </ol>\n                    </details>\n                </section>\n            );\n        } else if (heading) {\n            return (\n                <section\n                    className=\"abt-bibliography\"\n                    role=\"region\"\n                    aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n                >\n                    <Tag\n                        {...headingProps}\n                        className=\"abt-bibliography__heading\"\n                    >\n                        {heading}\n                    </Tag>\n                    <ol className=\"abt-bibliography__body\" {...containerAttrs}>\n                        {items.map(({ content, id }) => (\n                            <RichText.Content<'li'>\n                                key={id}\n                                tagName=\"li\"\n                                id={id}\n                                value={content}\n                            />\n                        ))}\n                    </ol>\n                </section>\n            );\n        }\n        return (\n            <section\n                className=\"abt-bibliography\"\n                role=\"region\"\n                aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n            >\n                <ol className=\"abt-bibliography__body\" {...containerAttrs}>\n                    {items.map(({ content, id }) => (\n                        <RichText.Content<'li'>\n                            key={id}\n                            tagName=\"li\"\n                            id={id}\n                            value={content}\n                        />\n                    ))}\n                </ol>\n            </section>\n        );\n    }\n}\n\nexport default BibliographySave;\n","import { BlockConfig, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport Processor from 'utils/processor';\n\nimport BibliographyEdit from './edit';\nimport BibliographySave from './save';\n\nexport interface Attributes {\n    items: Processor.BibItem[];\n    heading: string;\n    headingLevel: number;\n    isToggleable: boolean;\n    headingAlign?: 'left' | 'right' | 'center';\n    entryspacing?: string;\n    hangingindent?: string;\n    linespacing?: string;\n    maxoffset?: string;\n    secondFieldAlign?: 'flush' | 'margin';\n}\n\nexport const name = 'abt/bibliography';\n\nexport const config: BlockConfig<Attributes> = {\n    title: __('Bibliography', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __(\n        'Display a list of your cited references.',\n        'academic-bloggers-toolkit',\n    ),\n    icon: 'welcome-learn-more',\n    attributes: {\n        entryspacing: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-entryspacing',\n            selector: '.abt-bibliography__body',\n        },\n        hangingindent: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-hangingindent',\n            selector: '.abt-bibliography__body',\n        },\n        linespacing: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-linespacing',\n            selector: '.abt-bibliography__body',\n        },\n        maxoffset: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-maxoffset',\n            selector: '.abt-bibliography__body',\n        },\n        secondFieldAlign: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-second-field-align',\n            selector: '.abt-bibliography__body',\n        },\n\n        items: {\n            type: 'array',\n            default: [],\n            source: 'query',\n            selector: 'li',\n            query: {\n                id: {\n                    source: 'attribute',\n                    type: 'string',\n                    attribute: 'id',\n                },\n                content: {\n                    source: 'html',\n                    type: 'string',\n                },\n            },\n        },\n        heading: {\n            type: 'string',\n            default: '',\n        },\n        headingLevel: {\n            type: 'number',\n            default: 3,\n        },\n        headingAlign: {\n            type: 'string',\n        },\n        isToggleable: {\n            type: 'boolean',\n            default: false,\n        },\n    },\n    supports: {\n        html: false,\n        inserter: false,\n        multiple: false,\n        reusable: false,\n    },\n    transforms: {\n        from: [\n            {\n                type: 'raw',\n                selector: '.abt-bibliography',\n                transform(node: HTMLDivElement) {\n                    const heading = node.querySelector<HTMLElement>(\n                        '.abt-bibliography__heading',\n                    );\n                    const body = node.querySelector<HTMLElement>(\n                        '.abt-bibliography__container',\n                    );\n                    if (!body || body.children.length === 0) {\n                        return;\n                    }\n                    let attributes: Partial<Attributes> = {\n                        items: [...body.children].map(item => ({\n                            id: item.id,\n                            content: item.innerHTML,\n                        })),\n                    };\n                    if (heading && heading.textContent) {\n                        const re = /^H([1-6])$/i;\n                        const {\n                            dataset: { headingLevel },\n                            nodeName,\n                            textContent,\n                        } = heading;\n                        let headingMatch = re.exec(nodeName);\n                        if (headingMatch) {\n                            attributes = {\n                                ...attributes,\n                                heading: textContent,\n                                headingLevel: parseInt(headingMatch[1], 10),\n                            };\n                        } else if (nodeName === 'BUTTON' && headingLevel) {\n                            headingMatch = re.exec(headingLevel);\n                            attributes = {\n                                ...attributes,\n                                heading: textContent,\n                                headingLevel: parseInt(\n                                    headingMatch ? headingMatch[1] : '3',\n                                    10,\n                                ),\n                                isToggleable: true,\n                            };\n                        } else {\n                            return;\n                        }\n                    }\n                    return createBlock('abt/bibliography', attributes);\n                },\n            },\n        ],\n    },\n    edit: BibliographyEdit,\n    save: BibliographySave,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { BlockEditProps } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\nclass FootnotesEdit extends Component<BlockEditProps<Attributes>> {\n    render() {\n        const { items } = this.props.attributes;\n        return (\n            <section\n                className=\"abt-footnotes\"\n                role=\"region\"\n                aria-label={__('Footnotes', 'academic-bloggers-toolkit')}\n            >\n                <hr />\n                <ol>\n                    {items.map(({ content, id }) => (\n                        <RichText.Content<'li'>\n                            key={id}\n                            tagName=\"li\"\n                            id={id}\n                            className=\"abt-footnotes-item\"\n                            value={content}\n                        />\n                    ))}\n                </ol>\n            </section>\n        );\n    }\n}\n\nexport default FootnotesEdit;\n","import { BlockSaveProps } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\nclass FootnotesSave extends Component<BlockSaveProps<Attributes>> {\n    render() {\n        const { items } = this.props.attributes;\n        return (\n            <section\n                className=\"abt-footnotes\"\n                role=\"region\"\n                aria-label={__('Footnotes', 'academic-bloggers-toolkit')}\n            >\n                <hr />\n                <ol>\n                    {items.map(({ content, id }) => (\n                        <RichText.Content<'li'>\n                            key={id}\n                            tagName=\"li\"\n                            id={id}\n                            className=\"abt-footnotes-item\"\n                            value={content}\n                        />\n                    ))}\n                </ol>\n            </section>\n        );\n    }\n}\n\nexport default FootnotesSave;\n","import { BlockConfig } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport FootnotesEdit from './edit';\nimport FootnotesSave from './save';\n\nexport interface Attributes {\n    items: Array<{\n        id: string;\n        content: string;\n    }>;\n}\n\nexport const name = 'abt/footnotes';\n\nexport const config: BlockConfig<Attributes> = {\n    title: __('Footnotes', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __('Display a list of footnotes', 'academic-bloggers-toolkit'),\n    icon: 'testimonial',\n    attributes: {\n        items: {\n            type: 'array',\n            default: [],\n            source: 'query',\n            selector: 'li',\n            query: {\n                id: {\n                    source: 'attribute',\n                    type: 'string',\n                    attribute: 'id',\n                },\n                content: {\n                    source: 'html',\n                    type: 'string',\n                },\n            },\n        },\n    },\n    supports: {\n        html: false,\n        inserter: false,\n        multiple: false,\n        reusable: false,\n    },\n    edit: FootnotesEdit,\n    save: FootnotesSave,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { BlockEditProps } from '@wordpress/blocks';\nimport {\n    IconButton,\n    PanelBody,\n    Placeholder,\n    Toolbar,\n} from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { select as globalSelect, withSelect } from '@wordpress/data';\nimport {\n    BlockFormatControls,\n    InspectorControls,\n    RichText,\n} from '@wordpress/editor';\nimport { Component, ComponentType } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport classNames from 'classnames';\n\nimport CountIcon from 'components/count-icon';\nimport ReferenceItem from 'gutenberg/components/reference-item';\nimport SidebarItemList from 'gutenberg/components/sidebar-item-list';\nimport { localeCache, styleCache } from 'utils/cache';\nimport { swapWith } from 'utils/data';\nimport { stripListItem } from 'utils/editor';\nimport Processor from 'utils/processor';\n\nimport { Attributes } from './';\nimport styles from './style.scss';\n\nnamespace Edit {\n    export interface SelectProps {\n        readonly references: ReadonlyArray<CSL.Data>;\n    }\n    export type OwnProps = BlockEditProps<Attributes>;\n    export type Props = OwnProps & SelectProps;\n}\nclass Edit extends Component<Edit.Props> {\n    render() {\n        const {\n            attributes: { items, orderedList },\n            isSelected,\n            references,\n            setAttributes,\n        } = this.props;\n        const ListTag = orderedList ? 'ol' : 'ul';\n        return (\n            <>\n                <InspectorControls>\n                    <PanelBody>\n                        {__(\n                            'Double click on one or more items in the list below to insert them into the end of the list.',\n                            'academic-bloggers-toolkit',\n                        )}\n                        <PanelBody\n                            icon={<CountIcon count={references.length} />}\n                            initialOpen={false}\n                            title={__(\n                                'Available References',\n                                'academic-bloggers-toolkit',\n                            )}\n                        >\n                            <SidebarItemList\n                                items={references}\n                                renderItem={ReferenceItem}\n                                onItemDoubleClick={this.addItem}\n                            />\n                        </PanelBody>\n                    </PanelBody>\n                </InspectorControls>\n                <BlockFormatControls>\n                    <Toolbar\n                        controls={[\n                            {\n                                icon: 'editor-ul',\n                                title: __(\n                                    'Convert to unordered list',\n                                    'academic-bloggers-toolkit',\n                                ),\n                                isActive: orderedList === false,\n                                onClick() {\n                                    if (orderedList) {\n                                        setAttributes({ orderedList: false });\n                                    }\n                                },\n                            },\n                            {\n                                icon: 'editor-ol',\n                                title: __(\n                                    'Convert to ordered list',\n                                    'academic-bloggers-toolkit',\n                                ),\n                                isActive: orderedList === true,\n                                onClick() {\n                                    if (!orderedList) {\n                                        setAttributes({ orderedList: true });\n                                    }\n                                },\n                            },\n                        ]}\n                    />\n                </BlockFormatControls>\n                <section\n                    className=\"abt-static-bib\"\n                    role=\"region\"\n                    aria-label={__('References', 'academic-bloggers-toolkit')}\n                >\n                    {items.length === 0 && (\n                        <Placeholder\n                            icon=\"welcome-learn-more\"\n                            label={__(\n                                'No references added yet',\n                                'academic-bloggers-toolkit',\n                            )}\n                        >\n                            {__(\n                                'Add references to this list by double clicking one or more items listed in the \"Avaliable References\" section of the block settings panel.',\n                                'academic-bloggers-toolkit',\n                            )}\n                        </Placeholder>\n                    )}\n                    {items.length > 0 && (\n                        <ListTag className=\"abt-bibliography__body\">\n                            {items.map(({ content, id }, i) =>\n                                isSelected ? (\n                                    <LiveItem\n                                        key={id}\n                                        id={id}\n                                        content={content}\n                                        onMoveUp={this.makeItemMover(i, 'up')}\n                                        onRemove={() =>\n                                            setAttributes({\n                                                items: [\n                                                    ...items.slice(0, i),\n                                                    ...items.slice(i + 1),\n                                                ],\n                                            })\n                                        }\n                                        onMoveDown={this.makeItemMover(\n                                            i,\n                                            'down',\n                                        )}\n                                    />\n                                ) : (\n                                    <RichText.Content<'li'>\n                                        key={id}\n                                        data-id={id}\n                                        tagName=\"li\"\n                                        className={classNames(\n                                            'csl-entry',\n                                            styles.item,\n                                        )}\n                                        value={content}\n                                    />\n                                ),\n                            )}\n                        </ListTag>\n                    )}\n                </section>\n            </>\n        );\n    }\n\n    private makeItemMover = (index: number, dir: 'up' | 'down') => {\n        const {\n            attributes: { items },\n            setAttributes,\n        } = this.props;\n        if (\n            (dir === 'up' && index === 0) ||\n            (dir === 'down' && index === items.length - 1)\n        ) {\n            return;\n        }\n        return () =>\n            setAttributes({\n                items: swapWith(items, index, index + (dir === 'up' ? -1 : 1)),\n            });\n    };\n\n    private addItem = async (id: string) => {\n        const {\n            attributes: { items },\n            references,\n            setAttributes,\n        } = this.props;\n        const data = references.find(item => item.id === id);\n        if (!data) {\n            return;\n        }\n        const styleXml = await styleCache.fetchItem(\n            globalSelect('abt/data').getStyle().value,\n        );\n        await localeCache.fetchItem(styleXml);\n        const processor = new Processor(styleXml);\n        processor.parseCitations([\n            {\n                citationID: '',\n                citationItems: [\n                    {\n                        id: data.id,\n                        item: data,\n                    },\n                ],\n                properties: {\n                    index: 0,\n                    noteIndex: 0,\n                },\n            },\n        ]);\n        const newItem = processor.bibliography.items[0];\n        if (newItem) {\n            setAttributes({\n                items: [\n                    ...items,\n                    {\n                        ...newItem,\n                        content: stripListItem(newItem.content),\n                    },\n                ],\n            });\n        }\n    };\n}\n\nnamespace LiveItem {\n    export interface Props {\n        id: string;\n        content: string;\n        onRemove(): void;\n        onMoveDown?(): void;\n        onMoveUp?(): void;\n    }\n}\nconst LiveItem = ({\n    content,\n    id,\n    onMoveDown,\n    onMoveUp,\n    onRemove,\n}: LiveItem.Props) => (\n    <div key={id} className={styles.row}>\n        <RichText.Content<'li'>\n            tagName=\"li\"\n            data-id={id}\n            className={classNames('csl-entry', styles.item)}\n            value={content}\n        />\n        <div className={styles.buttonList}>\n            <IconButton\n                icon=\"arrow-up-alt2\"\n                disabled={!onMoveUp}\n                label={__('Move item up', 'academic-bloggers-toolkit')}\n                onClick={() => onMoveUp && onMoveUp()}\n            />\n            <IconButton\n                icon=\"trash\"\n                label={__('Remove item', 'academic-bloggers-toolkit')}\n                onClick={() => onRemove()}\n            />\n            <IconButton\n                icon=\"arrow-down-alt2\"\n                disabled={!onMoveDown}\n                label={__('Move item down', 'academic-bloggers-toolkit')}\n                onClick={() => onMoveDown && onMoveDown()}\n            />\n        </div>\n    </div>\n);\n\nexport default compose([\n    withSelect<Edit.SelectProps, Edit.OwnProps>(\n        (select, { attributes: { items } }) => {\n            const existingIds = items.map(({ id }) => id);\n            return {\n                references: select('abt/data')\n                    .getSortedItems()\n                    .filter(item => !existingIds.includes(item.id)),\n            };\n        },\n    ),\n])(Edit) as ComponentType<Edit.OwnProps>;\n","import { BlockSaveProps } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\nclass BibliographySave extends Component<BlockSaveProps<Attributes>> {\n    render() {\n        const { items, orderedList } = this.props.attributes;\n        const ListTag = orderedList ? 'ol' : 'ul';\n        return (\n            <section\n                className=\"abt-static-bib\"\n                role=\"region\"\n                aria-label={__('References', 'academic-bloggers-toolkit')}\n            >\n                <ListTag className=\"abt-bibliography__body\">\n                    {items.map(({ content, id }, i) => (\n                        <RichText.Content<'li'>\n                            key={i}\n                            data-id={id}\n                            tagName=\"li\"\n                            className=\"csl-entry\"\n                            value={content}\n                        />\n                    ))}\n                </ListTag>\n            </section>\n        );\n    }\n}\n\nexport default BibliographySave;\n","import { BlockConfig, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport uuid from 'uuid/v4';\n\nimport { stripListItem } from 'utils/editor';\nimport Processor from 'utils/processor';\n\nimport edit from './edit';\nimport save from './save';\n\nexport interface Attributes {\n    items: Processor.BibItem[];\n    orderedList: boolean;\n}\n\nexport const name = 'abt/static-bibliography';\n\nexport const config: BlockConfig<Attributes> = {\n    title: __('Static Bibliography', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __(\n        'Display a static list of references.',\n        'academic-bloggers-toolkit',\n    ),\n    icon: 'welcome-learn-more',\n    keywords: [\n        __('reference', 'academic-bloggers-toolkit'),\n        __('citation', 'academic-bloggers-toolkit'),\n        __('sources', 'academic-bloggers-toolkit'),\n    ],\n    attributes: {\n        items: {\n            type: 'array',\n            source: 'query',\n            selector: 'li',\n            default: [],\n            query: {\n                content: {\n                    type: 'string',\n                    source: 'html',\n                },\n                id: {\n                    type: 'string',\n                    source: 'attribute',\n                    attribute: 'data-id',\n                },\n            },\n        },\n        orderedList: {\n            type: 'boolean',\n            default: true,\n        },\n    },\n    supports: {\n        anchor: true,\n        html: false,\n    },\n    transforms: {\n        from: [\n            {\n                type: 'raw',\n                selector: '.abt-static-bib',\n                transform(node: HTMLDivElement) {\n                    const body = node.querySelector<HTMLDivElement>(\n                        '.abt-bibliography__container',\n                    );\n                    if (body) {\n                        const items = [...body.children].map(item => {\n                            const content = item.querySelector<HTMLDivElement>(\n                                '.csl-entry',\n                            );\n                            const id = item.id || uuid();\n                            return {\n                                id,\n                                content: content\n                                    ? stripListItem(content)\n                                    : item.innerHTML,\n                            };\n                        });\n                        return createBlock('abt/static-bibliography', {\n                            items,\n                        });\n                    }\n                    return;\n                },\n            },\n        ],\n    },\n    edit,\n    save,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { registerBlockType } from '@wordpress/blocks';\n\nimport 'css/_bibliography.scss?global';\nimport 'css/_footnotes.scss?global';\n\nimport bibliographyBlock from './bibliography';\nimport footnotesBlock from './footnotes';\nimport staticBibliographyBlock from './static-bibliography';\n\nregisterBlockType(...bibliographyBlock);\nregisterBlockType(...footnotesBlock);\nregisterBlockType(...staticBibliographyBlock);\n"],"sourceRoot":""}