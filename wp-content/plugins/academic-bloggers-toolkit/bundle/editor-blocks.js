!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=177)}([function(e,t){e.exports=wp.i18n},,function(e,t,n){var r=n(38),i=n(39),o=n(40);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},,function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(13),i=n(47);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(33);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function c(e){n(a,i,o,c,l,"next",e)}function l(e){n(a,i,o,c,l,"throw",e)}c(void 0)})}}},function(e,t){e.exports=wp.components},function(e,t){e.exports=wp.data},function(e,t){e.exports=wp.element},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){var r=n(44),i=n(45),o=n(46);e.exports=function(e,t){return r(e)||i(e,t)||o()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},,function(e,t){e.exports=lodash},function(e,t){e.exports=wp.compose},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},,function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return s});var r=n(2),i=n.n(r),o=n(17),a=n.n(o);function c(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}function l(e,t,n){var r=!0,i=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value,u=a.a.get(e,s);if(u)return u}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}function s(e,t,n){var r=i()(e),o=r.splice(t,1);return[].concat(i()(r.slice(0,n)),i()(o),i()(r.slice(n)))}},,,,function(e,t){e.exports=wp.editor},,,,,function(e,t){e.exports=wp.blocks},,function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(71),i=n(72);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[o+c]=a[c];return t||i(a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u});var r=n(2),i=n.n(r),o=n(31),a=n(11),c=["core/freeform","core/html"];function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.createElement("div");if(e){var n=Object(a.select)("core/editor").getBlocksForSerialization().filter(function(e){return!c.includes(e.name)&&e.isValid});t.innerHTML=Object(o.serialize)(n)}else t.innerHTML=Object(a.select)("core/editor").getEditedPostContent();return t}function s(e){var t=e.entryspacing,n=e.hangingindent,r=e.maxoffset,i=e.linespacing,o=e.secondFieldAlign;return Object.assign({},t?{"data-entryspacing":"".concat(t)}:void 0,n?{"data-hangingindent":"".concat(n)}:void 0,r?{"data-maxoffset":"".concat(r)}:void 0,i?{"data-linespacing":"".concat(i)}:void 0,o?{"data-second-field-align":o}:void 0)}function u(e){if("string"==typeof e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector(".csl-entry");if(!n)throw new Error('Outer HTML of item must be a div with className "csl-entry"');e=n}var r=e,o=[],a=!0,c=!1,l=void 0;try{for(var s,u=e.children[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var m=s.value;if(m.classList.contains("csl-indent"))break;m.classList.contains("csl-left-margin")?o=[].concat(i()(o),[m]):m.classList.contains("csl-right-inline")&&(m.outerHTML=m.innerHTML)}}catch(e){c=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return o.forEach(function(e){return r.removeChild(e)}),r.innerHTML.trim()}},,,function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,,,function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,,,,,,,,,,,,,,,,,function(e,t){e.exports=CSL},function(e,t,n){"use strict";n.d(t,"a",function(){return x}),n.d(t,"b",function(){return k});var r=n(9),i=n.n(r),o=n(7),a=n.n(o),c=n(6),l=n.n(c),s=n(8),u=n.n(s),m=n(2),p=n.n(m),f=n(15),b=n.n(f),g=n(3),d=n.n(g),h=n(4),y=n.n(h),v=n(17),_=n.n(v),w=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;d()(this,e),this.PREFIX="ABT_CACHE_",this.VERSION="v1.0",this.KEY="".concat(this.PREFIX).concat(this.VERSION),this._cache=this.storageIsAvailable()?top.localStorage:this.createFallbackStorage();this.ITEM_KEY=t,this.EXPIRES=Date.now()+864e5*r;var i=this.KEY,o=this.PREFIX;Object.keys(this._cache).filter(function(e){return e.startsWith(o)&&e!==i}).forEach(function(e){return n._cache.removeItem(e)})}return y()(e,[{key:"getItem",value:function(e){return this.cache[e]||null}},{key:"removeItem",value:function(e){this.cache=_.a.omit(this.cache,e)}},{key:"setItem",value:function(e,t){this.cache=Object.assign({},this.cache,b()({},e,t))}},{key:"storageIsAvailable",value:function(){try{var e=window.localStorage;return e.setItem("__storage_test__","test"),e.removeItem("__storage_test__"),!0}catch(e){return!1}}},{key:"createFallbackStorage",value:function(){return{_value:new Map,get length(){return this._value.size},clear:function(){this._value.clear()},getItem:function(e){return this._value.get(e)||null},key:function(e){return p()(this._value.keys())[e]||null},removeItem:function(e){this._value.delete(e)},setItem:function(e,t){this._value.set(e,t)}}}},{key:"cache",get:function(){var e=this.EXPIRES,t=this.ITEM_KEY,n=this.KEY,r=JSON.parse(this._cache.getItem(n)||"{}"),i=r[t];return(!i||i.expires<Date.now())&&(i={expires:e,data:{}},this._cache.setItem(n,JSON.stringify(Object.assign({},r,b()({},t,Object.assign({},i)))))),Object.assign({},i.data)},set:function(e){var t=this.ITEM_KEY,n=this.KEY,r=JSON.parse(this._cache.getItem(n)||"{}"),i=r[t];this._cache.setItem(n,JSON.stringify(Object.assign({},r,b()({},t,Object.assign({},i,{data:e})))))}}]),e}(),x=new(function(e){function t(){var e;return d()(this,t),(e=a()(this,l()(t).apply(this,arguments))).parser=new DOMParser,e}return u()(t,e),y()(t,[{key:"fetchItem",value:function(){var e=i()(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.parser.parseFromString(t,"application/xml"),r=n.querySelector("style"),!n.querySelector("parsererror")){e.next=4;break}throw new Error("Invalid style XML");case 4:if(r){e.next=6;break}throw new Error("CSL style is not valid");case 6:return i=r.getAttribute("default-locale")||"en-US",e.next=9,fetch("https://raw.githubusercontent.com/citation-style-language/locales/master/locales-".concat(i,".xml"));case 9:if((o=e.sent).ok){e.next=12;break}throw new Error(o.statusText);case 12:return e.next=14,o.text();case 14:return a=e.sent,this.setItem(i,a),e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(w))("locales"),k=new(function(e){function t(){return d()(this,t),a()(this,l()(t).apply(this,arguments))}return u()(t,e),y()(t,[{key:"fetchItem",value:function(){var e=i()(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=this.getItem(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,fetch("https://raw.githubusercontent.com/citation-style-language/styles/master/".concat(t,".csl"));case 5:if((r=e.sent).ok){e.next=8;break}throw new Error(r.statusText);case 8:return e.next=10,r.text();case 10:return i=e.sent,this.setItem(t,i),e.abrupt("return",i);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(w))("styles")},,,,,function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(125),i=n.n(r);function o(e){var t=e.count;return React.createElement("span",{className:i.a.icon},t)}},function(e,t,n){"use strict";var r=n(106),i=n.n(r);t.a=function(e){var t=e.items,n=e.onItemClick,r=e.onItemDoubleClick,o=e.renderItem,a=e.selectedItems,c=void 0===a?[]:a;return wp.element.createElement("div",{className:i.a.list,role:"listbox","aria-multiselectable":!0},t.map(function(e){return wp.element.createElement("div",{key:e.id,className:i.a.item,role:"option","aria-selected":c.includes(e.id),onClick:function(){return n&&n(e.id)},onDoubleClick:function(){return r&&r(e.id)}},o(e))}))}},function(e,t,n){e.exports={list:"style__list___sXSVw",item:"style__item___3Ltyn"}},,function(e,t,n){"use strict";var r=n(0),i=n(3),o=n.n(i),a=n(4),c=n.n(a),l=n(17),s=n.n(l),u=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getYear",value:function(e){return e&&e.raw?new Date(e.raw).getUTCFullYear():s.a.get(e,"[date-parts][0][0]",Object(r._x)("n.d.",'Abbreviation for "no date"',"academic-bloggers-toolkit"))}}]),e}(),m=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getNames",value:function(e,t){return e.slice(0,t).map(function(e){var t=e.family,n=e.given,r=e.literal;return r||(t?"".concat(t," ").concat(n?n[0]:"").trim():"")}).filter(Boolean).join(", ")+"."}}]),e}(),p=n(22),f=n(126),b=n.n(f);function g(e){return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("strong",null,e.title),e.author&&e.author.length>0&&wp.element.createElement("div",{className:b.a.authors},m.getNames(e.author,3)),wp.element.createElement("div",null,wp.element.createElement("i",null,Object(p.b)(e,["journalAbbreviation","container-title-short","container-title","publisher"],Object(r._x)("n.p.",'Abbreviation for "no publisher"',"academic-bloggers-toolkit"))),wp.element.createElement("span",null,u.getYear(e.issued))))}n.d(t,"a",function(){return g})},,,,,,,,,,,,,,,,,function(e,t,n){e.exports={icon:"style__icon___S3vp9"}},function(e,t,n){e.exports={authors:"style__authors___3xZGF"}},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(19),i=n.n(r),o=n(3),a=n.n(o),c=n(4),l=n.n(c),s=n(7),u=n.n(s),m=n(6),p=n.n(m),f=n(8),b=n.n(f),g=n(12),d=n(21),h=n.n(d),y=n(128),v=n.n(y),_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},w=function(e){function t(){var e;return a()(this,t),(e=u()(this,p()(t).apply(this,arguments))).ref=e.props.inputRef||Object(g.createRef)(),e.handleBlur=function(t){t.currentTarget.value=t.currentTarget.value.trim(),e.handleChange(t),e.props.onBlur(t)},e.handleChange=function(t){var n=e.state.offset;t.currentTarget.style.height="auto",t.currentTarget.style.height="".concat(t.currentTarget.scrollHeight+n,"px"),e.props.onChange(t)},e}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;if(e){var t=e.offsetHeight-e.clientHeight;this.setState({offset:t}),e.style.height="auto",e.style.height="".concat(e.scrollHeight+t,"px")}}},{key:"render",value:function(){var e=this.props,t=e.className,n=_(e,["className"]);return React.createElement("textarea",i()({},n,{className:h()(v.a.textarea,t),ref:this.ref,rows:1,onBlur:this.handleBlur,onChange:this.handleChange}))}}]),t}(g.Component);w.defaultProps={onBlur:function(){},onChange:function(){}}},function(e,t,n){e.exports={textarea:"style__textarea___g5DyY"}},function(e,t,n){"use strict";var r=n(14),i=n.n(r),o=n(3),a=n.n(o),c=n(4),l=n.n(c),s=n(11),u=n(65),m=n(17),p=n.n(m),f=n(66),b=function(){function e(t){a()(this,e),this.sys={retrieveItem:function(e){var t=Object(s.select)("abt/data").getItemById(e);if(!t)throw new Error('CSL Data could not be found for item ID "'.concat(e,'"'));return t},retrieveLocale:function(e){var t=f.a.getItem(e);if(!t)throw new Error('Requested locale "'.concat(e,'" was not prefetched'));return t}};var n=e.instance;if(n)return n.style!==t&&(n.style=t,n.engine=new u.Engine(n.sys,n.style),n.engine.opt.development_extensions.wrap_url_and_doi=!0),n;e.instance=this,this.style=t,this.engine=new u.Engine(this.sys,this.style),this.engine.opt.development_extensions.wrap_url_and_doi=!0}return l()(e,[{key:"parseCitations",value:function(e){var t=this;return this.engine.rebuildProcessorState(e).map(function(e){var n=i()(e,3),r=n[0];return{id:r,html:n[2],sortedItems:JSON.stringify(t.registry.citationById[r].sortedItems.map(function(e){return i()(e,1)[0].id}))}})}},{key:"bibliography",get:function(){var e;try{if(!(e=this.engine.makeBibliography()))return{items:[],meta:{}}}catch(e){return{items:[],meta:{}}}var t=e,n=i()(t,2),r=n[0],o=n[1],a=r.entryspacing,c=r.hangingindent,l=r.linespacing,s=r.maxoffset,u=r["second-field-align"];return{meta:{entryspacing:a,hangingindent:c,linespacing:l,maxoffset:s,secondFieldAlign:u||void 0},items:p.a.zipWith(p.a.flatten(r.entry_ids),o,function(e,t){return{id:e,content:t}})}}},{key:"registry",get:function(){return this.engine.registry.citationreg}}]),e}();b.instance=null,t.a=b},,,function(e,t,n){e.exports={item:"style__item___x_svo",buttonList:"style__button-list___D2Txs",row:"style__row___zDq5B"}},,,,,,,,,,,,,,function(e,t,n){e.exports={heading:"style__heading___2dqtH",summary:"style__summary___1Srnv"}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(31),a=(n(169),n(170),n(0)),c=n(19),l=n.n(c),s=n(3),u=n.n(s),m=n(4),p=n.n(m),f=n(7),b=n.n(f),g=n(6),d=n.n(g),h=n(8),y=n.n(h),v=n(10),_=n(26),w=n(12),x=n(21),k=n.n(x),E=n(127),O=n(35),j=n(146),I=n.n(j),S=function(e){function t(){var e;return u()(this,t),(e=b()(this,d()(t).apply(this,arguments))).maybeRenderHeading=function(){var t=e.props,n=t.attributes,r=n.heading,i=n.headingAlign,o=n.headingLevel,c=n.isToggleable,l=t.isSelected,s=t.setAttributes;if(!l&&!r)return null;var u="h".concat(o);return wp.element.createElement(u,{className:k()({"abt-bibliography__heading":!c},I.a.heading),style:{textAlign:i}},l&&wp.element.createElement(E.a,{placeholder:Object(a.__)("Write heading...","academic-bloggers-toolkit"),value:r,onChange:function(e){var t=e.currentTarget.value;s({heading:t})},onBlur:function(){return!r&&s({isToggleable:!1})}}),!l&&r)},e}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=t.heading,o=t.headingAlign,c=t.headingLevel,s=t.isToggleable,u=t.items,m=Object(O.b)(t);return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(_.InspectorControls,null,wp.element.createElement(v.PanelBody,{title:Object(a.__)("Bibliography Settings","academic-bloggers-toolkit")},wp.element.createElement("p",null,Object(a.__)("Heading Level","academic-bloggers-toolkit")),wp.element.createElement(v.Toolbar,{controls:i()(Array(6).keys()).map(function(e){return{icon:"heading",title:"".concat(Object(a.__)("Heading","academic-bloggers-toolkit")," ").concat(e+1),isActive:e+1===c,onClick:function(){return n({headingLevel:e+1})},subscript:"".concat(e+1)}})}),wp.element.createElement("p",null,Object(a.__)("Heading Alignment","academic-bloggers-toolkit")),wp.element.createElement(_.AlignmentToolbar,{value:o,onChange:function(e){return n({headingAlign:e})}}),wp.element.createElement(v.ToggleControl,{label:Object(a.__)("Enable toggle","academic-bloggers-toolkit"),checked:s,help:Object(a.__)("Toggle mode can only be enabled if the bibliography has a heading.","academic-bloggers-toolkit"),onChange:function(e){return r&&n({isToggleable:e})}}))),wp.element.createElement("section",{className:"abt-bibliography",role:"region","aria-label":Object(a.__)("Bibliography","academic-bloggers-toolkit")},s&&wp.element.createElement("details",null,wp.element.createElement("summary",{className:I.a.summary},this.maybeRenderHeading()),wp.element.createElement("ol",l()({className:"abt-bibliography__body"},m),u.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,value:t})}))),!s&&wp.element.createElement(wp.element.Fragment,null,this.maybeRenderHeading(),wp.element.createElement("ol",l()({className:"abt-bibliography__body"},m),u.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,value:t})})))))}}]),t}(w.Component),C=function(e){function t(){return u()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.attributes,t=e.heading,n=e.headingLevel,r=e.isToggleable,i=e.items,o=e.headingAlign,c=Object(O.b)(this.props.attributes),s="h".concat(n),u=o?{style:{textAlign:o}}:{};return t&&r?wp.element.createElement("section",{className:"abt-bibliography",role:"region","aria-label":Object(a.__)("Bibliography","academic-bloggers-toolkit")},wp.element.createElement("details",null,wp.element.createElement("summary",null,wp.element.createElement(s,l()({},u,{className:"abt-bibliography__heading"}),t)),wp.element.createElement("ol",l()({className:"abt-bibliography__body"},c),i.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,value:t})})))):t?wp.element.createElement("section",{className:"abt-bibliography",role:"region","aria-label":Object(a.__)("Bibliography","academic-bloggers-toolkit")},wp.element.createElement(s,l()({},u,{className:"abt-bibliography__heading"}),t),wp.element.createElement("ol",l()({className:"abt-bibliography__body"},c),i.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,value:t})}))):wp.element.createElement("section",{className:"abt-bibliography",role:"region","aria-label":Object(a.__)("Bibliography","academic-bloggers-toolkit")},wp.element.createElement("ol",l()({className:"abt-bibliography__body"},c),i.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,value:t})})))}}]),t}(w.Component),N=["abt/bibliography",{title:Object(a.__)("Bibliography","academic-bloggers-toolkit"),category:"widgets",description:Object(a.__)("Display a list of your cited references.","academic-bloggers-toolkit"),icon:"welcome-learn-more",attributes:{entryspacing:{type:"string",source:"attribute",attribute:"data-entryspacing",selector:".abt-bibliography__body"},hangingindent:{type:"string",source:"attribute",attribute:"data-hangingindent",selector:".abt-bibliography__body"},linespacing:{type:"string",source:"attribute",attribute:"data-linespacing",selector:".abt-bibliography__body"},maxoffset:{type:"string",source:"attribute",attribute:"data-maxoffset",selector:".abt-bibliography__body"},secondFieldAlign:{type:"string",source:"attribute",attribute:"data-second-field-align",selector:".abt-bibliography__body"},items:{type:"array",default:[],source:"query",selector:"li",query:{id:{source:"attribute",type:"string",attribute:"id"},content:{source:"html",type:"string"}}},heading:{type:"string",default:""},headingLevel:{type:"number",default:3},headingAlign:{type:"string"},isToggleable:{type:"boolean",default:!1}},supports:{html:!1,inserter:!1,multiple:!1,reusable:!1},transforms:{from:[{type:"raw",selector:".abt-bibliography",transform:function(e){var t=e.querySelector(".abt-bibliography__heading"),n=e.querySelector(".abt-bibliography__container");if(n&&0!==n.children.length){var r={items:i()(n.children).map(function(e){return{id:e.id,content:e.innerHTML}})};if(t&&t.textContent){var a=/^H([1-6])$/i,c=t.dataset.headingLevel,l=t.nodeName,s=t.textContent,u=a.exec(l);if(u)r=Object.assign({},r,{heading:s,headingLevel:parseInt(u[1],10)});else{if("BUTTON"!==l||!c)return;u=a.exec(c),r=Object.assign({},r,{heading:s,headingLevel:parseInt(u?u[1]:"3",10),isToggleable:!0})}}return Object(o.createBlock)("abt/bibliography",r)}}}]},edit:S,save:C}],T=function(e){function t(){return u()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.attributes.items;return wp.element.createElement("section",{className:"abt-footnotes",role:"region","aria-label":Object(a.__)("Footnotes","academic-bloggers-toolkit")},wp.element.createElement("hr",null),wp.element.createElement("ol",null,e.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,className:"abt-footnotes-item",value:t})})))}}]),t}(w.Component),A=function(e){function t(){return u()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.attributes.items;return wp.element.createElement("section",{className:"abt-footnotes",role:"region","aria-label":Object(a.__)("Footnotes","academic-bloggers-toolkit")},wp.element.createElement("hr",null),wp.element.createElement("ol",null,e.map(function(e){var t=e.content,n=e.id;return wp.element.createElement(_.RichText.Content,{key:n,tagName:"li",id:n,className:"abt-footnotes-item",value:t})})))}}]),t}(w.Component),R=["abt/footnotes",{title:Object(a.__)("Footnotes","academic-bloggers-toolkit"),category:"widgets",description:Object(a.__)("Display a list of footnotes","academic-bloggers-toolkit"),icon:"testimonial",attributes:{items:{type:"array",default:[],source:"query",selector:"li",query:{id:{source:"attribute",type:"string",attribute:"id"},content:{source:"html",type:"string"}}}},supports:{html:!1,inserter:!1,multiple:!1,reusable:!1},edit:T,save:A}],L=n(34),B=n.n(L),P=n(9),M=n.n(P),H=n(18),D=n(11),F=n(104),q=n(108),Y=n(105),V=n(66),J=n(22),K=n(129),X=n(132),U=n.n(X),z=function(e){function t(){var e;return u()(this,t),(e=b()(this,d()(t).apply(this,arguments))).makeItemMover=function(t,n){var r=e.props,i=r.attributes.items,o=r.setAttributes;if(!("up"===n&&0===t||"down"===n&&t===i.length-1))return function(){return o({items:Object(J.c)(i,t,t+("up"===n?-1:1))})}},e.addItem=function(){var t=M()(regeneratorRuntime.mark(function t(n){var r,o,a,c,l,s,u,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,o=r.attributes.items,a=r.references,c=r.setAttributes,l=a.find(function(e){return e.id===n})){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,V.b.fetchItem(Object(D.select)("abt/data").getStyle().value);case 6:return s=t.sent,t.next=9,V.a.fetchItem(s);case 9:(u=new K.a(s)).parseCitations([{citationID:"",citationItems:[{id:l.id,item:l}],properties:{index:0,noteIndex:0}}]),(m=u.bibliography.items[0])&&c({items:[].concat(i()(o),[Object.assign({},m,{content:Object(O.c)(m.content)})])});case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=n.items,o=n.orderedList,c=t.isSelected,l=t.references,s=t.setAttributes,u=o?"ol":"ul";return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(_.InspectorControls,null,wp.element.createElement(v.PanelBody,null,Object(a.__)("Double click on one or more items in the list below to insert them into the end of the list.","academic-bloggers-toolkit"),wp.element.createElement(v.PanelBody,{icon:wp.element.createElement(F.a,{count:l.length}),initialOpen:!1,title:Object(a.__)("Available References","academic-bloggers-toolkit")},wp.element.createElement(Y.a,{items:l,renderItem:q.a,onItemDoubleClick:this.addItem})))),wp.element.createElement(_.BlockFormatControls,null,wp.element.createElement(v.Toolbar,{controls:[{icon:"editor-ul",title:Object(a.__)("Convert to unordered list","academic-bloggers-toolkit"),isActive:!1===o,onClick:function(){o&&s({orderedList:!1})}},{icon:"editor-ol",title:Object(a.__)("Convert to ordered list","academic-bloggers-toolkit"),isActive:!0===o,onClick:function(){o||s({orderedList:!0})}}]})),wp.element.createElement("section",{className:"abt-static-bib",role:"region","aria-label":Object(a.__)("References","academic-bloggers-toolkit")},0===r.length&&wp.element.createElement(v.Placeholder,{icon:"welcome-learn-more",label:Object(a.__)("No references added yet","academic-bloggers-toolkit")},Object(a.__)('Add references to this list by double clicking one or more items listed in the "Avaliable References" section of the block settings panel.',"academic-bloggers-toolkit")),r.length>0&&wp.element.createElement(u,{className:"abt-bibliography__body"},r.map(function(t,n){var o=t.content,a=t.id;return c?wp.element.createElement(W,{key:a,id:a,content:o,onMoveUp:e.makeItemMover(n,"up"),onRemove:function(){return s({items:[].concat(i()(r.slice(0,n)),i()(r.slice(n+1)))})},onMoveDown:e.makeItemMover(n,"down")}):wp.element.createElement(_.RichText.Content,{key:a,"data-id":a,tagName:"li",className:k()("csl-entry",U.a.item),value:o})}))))}}]),t}(w.Component),W=function(e){var t=e.content,n=e.id,r=e.onMoveDown,i=e.onMoveUp,o=e.onRemove;return wp.element.createElement("div",{key:n,className:U.a.row},wp.element.createElement(_.RichText.Content,{tagName:"li","data-id":n,className:k()("csl-entry",U.a.item),value:t}),wp.element.createElement("div",{className:U.a.buttonList},wp.element.createElement(v.IconButton,{icon:"arrow-up-alt2",disabled:!i,label:Object(a.__)("Move item up","academic-bloggers-toolkit"),onClick:function(){return i&&i()}}),wp.element.createElement(v.IconButton,{icon:"trash",label:Object(a.__)("Remove item","academic-bloggers-toolkit"),onClick:function(){return o()}}),wp.element.createElement(v.IconButton,{icon:"arrow-down-alt2",disabled:!r,label:Object(a.__)("Move item down","academic-bloggers-toolkit"),onClick:function(){return r&&r()}})))},G=Object(H.compose)([Object(D.withSelect)(function(e,t){var n=t.attributes.items.map(function(e){return e.id});return{references:e("abt/data").getSortedItems().filter(function(e){return!n.includes(e.id)})}})])(z),Z=function(e){function t(){return u()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.attributes,t=e.items,n=e.orderedList?"ol":"ul";return wp.element.createElement("section",{className:"abt-static-bib",role:"region","aria-label":Object(a.__)("References","academic-bloggers-toolkit")},wp.element.createElement(n,{className:"abt-bibliography__body"},t.map(function(e,t){var n=e.content,r=e.id;return wp.element.createElement(_.RichText.Content,{key:t,"data-id":r,tagName:"li",className:"csl-entry",value:n})})))}}]),t}(w.Component),$=["abt/static-bibliography",{title:Object(a.__)("Static Bibliography","academic-bloggers-toolkit"),category:"widgets",description:Object(a.__)("Display a static list of references.","academic-bloggers-toolkit"),icon:"welcome-learn-more",keywords:[Object(a.__)("reference","academic-bloggers-toolkit"),Object(a.__)("citation","academic-bloggers-toolkit"),Object(a.__)("sources","academic-bloggers-toolkit")],attributes:{items:{type:"array",source:"query",selector:"li",default:[],query:{content:{type:"string",source:"html"},id:{type:"string",source:"attribute",attribute:"data-id"}}},orderedList:{type:"boolean",default:!0}},supports:{anchor:!0,html:!1},transforms:{from:[{type:"raw",selector:".abt-static-bib",transform:function(e){var t=e.querySelector(".abt-bibliography__container");if(t){var n=i()(t.children).map(function(e){var t=e.querySelector(".csl-entry");return{id:e.id||B()(),content:t?Object(O.c)(t):e.innerHTML}});return Object(o.createBlock)("abt/static-bibliography",{items:n})}}}]},edit:G,save:Z}];o.registerBlockType.apply(void 0,i()(N)),o.registerBlockType.apply(void 0,i()(R)),o.registerBlockType.apply(void 0,i()($))}]);
//# sourceMappingURL=editor-blocks.js.map