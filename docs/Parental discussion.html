<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Safetots – parental-discussion</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Safetots</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./Rights of the Child 10Rs.html" rel="" target="" aria-current="page">
 <span class="menu-text">Rights</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Competence 5Ws.html" rel="" target="">
 <span class="menu-text">Competence</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./The 10Ns.html" rel="" target="">
 <span class="menu-text">10N</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Crisis 10Cs.html" rel="" target="">
 <span class="menu-text">Crisis</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Parental discussion.html">Parental discussion</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./The Safetots Mission and Story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Safetots Mission and Story</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Rights of the Child 10Rs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rights of the Child (10Rs)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Competence 5Ws.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Competence (5Ws)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./The 10Ns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The 10-Ns</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Crisis 10Cs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Crisis (10Cs)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Quality Improvement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quality Improvement</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Parental discussion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Parental discussion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./For Parents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">For Parents</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#parental-discussion" id="toc-parental-discussion" class="nav-link active" data-scroll-target="#parental-discussion">Parental discussion</a>
  <ul class="collapse">
  <li><a href="#how-can-i-reassure-parents-who-are-worried-about-the-risks-of-anesthesia-and-analgesia" id="toc-how-can-i-reassure-parents-who-are-worried-about-the-risks-of-anesthesia-and-analgesia" class="nav-link" data-scroll-target="#how-can-i-reassure-parents-who-are-worried-about-the-risks-of-anesthesia-and-analgesia">How can I reassure parents who are worried about the risks of anesthesia and analgesia?</a></li>
  <li><a href="#what-do-we-know-about-the-risks-of-anesthesia-and-analgesia" id="toc-what-do-we-know-about-the-risks-of-anesthesia-and-analgesia" class="nav-link" data-scroll-target="#what-do-we-know-about-the-risks-of-anesthesia-and-analgesia">What do we know about the risks of anesthesia and analgesia?</a></li>
  <li><a href="#what-can-i-do-to-minimize-risks" id="toc-what-can-i-do-to-minimize-risks" class="nav-link" data-scroll-target="#what-can-i-do-to-minimize-risks">What can I do to minimize risks?</a></li>
  <li><a href="#what-should-i-say-to-the-parents-or-carers-of-a-young-infant-who-express-concern-about-anesthesia-and-the-potential-for-long-term-effects-on-the-brain" id="toc-what-should-i-say-to-the-parents-or-carers-of-a-young-infant-who-express-concern-about-anesthesia-and-the-potential-for-long-term-effects-on-the-brain" class="nav-link" data-scroll-target="#what-should-i-say-to-the-parents-or-carers-of-a-young-infant-who-express-concern-about-anesthesia-and-the-potential-for-long-term-effects-on-the-brain">What should I say to the parents or carers of a young infant who express concern about anesthesia and the potential for long-term effects on the brain?</a></li>
  <li><a href="#if-i-am-called-to-anesthetize-a-young-infant-should-i-instigate-a-discussion-about-long-term-effects-of-anesthesia-on-the-developing-brain" id="toc-if-i-am-called-to-anesthetize-a-young-infant-should-i-instigate-a-discussion-about-long-term-effects-of-anesthesia-on-the-developing-brain" class="nav-link" data-scroll-target="#if-i-am-called-to-anesthetize-a-young-infant-should-i-instigate-a-discussion-about-long-term-effects-of-anesthesia-on-the-developing-brain">If I am called to anesthetize a young infant should I instigate a discussion about long-term effects of anesthesia on the developing brain?</a></li>
  <li><a href="#should-i-alter-my-current-anesthesia-practice-in-response-to-the-current-evidence-base-information-or-other-published-statements" id="toc-should-i-alter-my-current-anesthesia-practice-in-response-to-the-current-evidence-base-information-or-other-published-statements" class="nav-link" data-scroll-target="#should-i-alter-my-current-anesthesia-practice-in-response-to-the-current-evidence-base-information-or-other-published-statements">Should I alter my current anesthesia practice in response to the current evidence base information or other published statements?</a></li>
  <li><a href="#is-repeated-exposure-or-long-duration-exposure-to-anesthetic-agents-more-harmful-than-short--duration-single-exposure" id="toc-is-repeated-exposure-or-long-duration-exposure-to-anesthetic-agents-more-harmful-than-short--duration-single-exposure" class="nav-link" data-scroll-target="#is-repeated-exposure-or-long-duration-exposure-to-anesthetic-agents-more-harmful-than-short--duration-single-exposure">Is repeated exposure or long duration exposure to anesthetic agents more harmful than short- duration single exposure?</a></li>
  <li><a href="#if-parents-still-remain-unsure-or-are-concerned-about-providing-consent-for-anesthesia-and-surgery-what-should-i-do" id="toc-if-parents-still-remain-unsure-or-are-concerned-about-providing-consent-for-anesthesia-and-surgery-what-should-i-do" class="nav-link" data-scroll-target="#if-parents-still-remain-unsure-or-are-concerned-about-providing-consent-for-anesthesia-and-surgery-what-should-i-do">If parents still remain unsure or are concerned about providing consent for anesthesia and surgery, what should I do?</a></li>
  <li><a href="#what-can-i-do-to-improve-the-quality-of-my-care" id="toc-what-can-i-do-to-improve-the-quality-of-my-care" class="nav-link" data-scroll-target="#what-can-i-do-to-improve-the-quality-of-my-care">What can I do to improve the quality of my care?</a></li>
  <li><a href="#if-children-or-parents-ask-for-more-information-about-anesthesia-and-analgesia-where-should-they-go" id="toc-if-children-or-parents-ask-for-more-information-about-anesthesia-and-analgesia-where-should-they-go" class="nav-link" data-scroll-target="#if-children-or-parents-ask-for-more-information-about-anesthesia-and-analgesia-where-should-they-go">If children or parents ask for more information about anesthesia and analgesia, where should they go?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="parental-discussion" class="level2">
<h2 class="anchored" data-anchor-id="parental-discussion">Parental discussion</h2>
<p><img src="media/image9.png" style="width:5.50833in;height:3.09861in" alt="A doctor and a baby Description automatically generated with medium confidence"> What to include in discussions of benefits and risks of anesthesia and analgesia with children, parents and families</p>
<section id="how-can-i-reassure-parents-who-are-worried-about-the-risks-of-anesthesia-and-analgesia" class="level3">
<h3 class="anchored" data-anchor-id="how-can-i-reassure-parents-who-are-worried-about-the-risks-of-anesthesia-and-analgesia">How can I reassure parents who are worried about the risks of anesthesia and analgesia?</h3>
</section>
<section id="what-do-we-know-about-the-risks-of-anesthesia-and-analgesia" class="level3">
<h3 class="anchored" data-anchor-id="what-do-we-know-about-the-risks-of-anesthesia-and-analgesia">What do we know about the risks of anesthesia and analgesia?</h3>
<p>Peri-operative complications occur more often in neonates, infants and young children when compared with older children and adults, and morbidity and mortality risks are higher at younger ages. The incidence and severity of peri-operative complications are dependent on young age (reduced physiological reserves), pre-operative morbidity, urgency of the procedure as well as the training and experience of the anesthesiologist and the anesthesia team. There is a deﬁnite causal relationship between preventable poor peri-operative anesthetic care and adverse events with persistent poor neurological outcome and mortality in neonates, infants and small children.</p>
<p>This table gives an idea of risks and how often they might occur.</p>
<p>———————————————————————– Risk Risk level&nbsp; Description —————– ———— —————————————- Restlessness 1 in 10 Very common (“someone in your family”) Sickness 1 in 10 Very common&nbsp; Dizziness 1 in 10 Very common Headache 1 in 100 Common (“someone in a street”) Chest infection 1 in 1000 Uncommon (“someone in a village”) Damage to teeth 1 in 1000 Uncommon Awareness 1 in 1000 Uncommon Serious allergy 1 in 10 000 Rare (“someone in a small town”) to drugs<br>
Serious 1 in 10 000 Rare complication of local anaesthesia<br>
Serious 1 in 10 000 Rare complication of strong pain killers<br>
Brain damage &lt; 1 in 100 Very rare (“someone in a large town”) 000<br>
Death &lt;&lt; 1 in Very rare 100 000<br>
&nbsp; &nbsp; &nbsp; ———————————————————————– Compared to the risk of car travel, the risk of serious harm from anesthesia is very small.</p>
</section>
<section id="what-can-i-do-to-minimize-risks" class="level3">
<h3 class="anchored" data-anchor-id="what-can-i-do-to-minimize-risks">What can I do to minimize risks?</h3>
<p>Pediatric anesthesia is usually safe in experienced hands and in well-organized anesthesia departments. Neonates, infants and children with complex needs or undergoing major surgery should be treated in centers by experienced pediatric teams. Older, otherwise healthy children for common elective procedures who are treated in non-pediatric hospitals beneﬁt from anesthesiologists trained and experienced in pediatric anesthesia.A specialist pediatric anesthesiologist has been trained for a minimum of one year at a large pediatric center and may also have a specialist pediatric anesthesia certiﬁcation.</p>
<p>Good pediatric anesthesia care also requires well trained pediatric nurses, pediatric post-anesthesia recovery facilities, established standard operating protocols (SOPs) as well as continuous education and training. These recommendations apply to all places where children are anesthetized.</p>
</section>
<section id="what-should-i-say-to-the-parents-or-carers-of-a-young-infant-who-express-concern-about-anesthesia-and-the-potential-for-long-term-effects-on-the-brain" class="level3">
<h3 class="anchored" data-anchor-id="what-should-i-say-to-the-parents-or-carers-of-a-young-infant-who-express-concern-about-anesthesia-and-the-potential-for-long-term-effects-on-the-brain">What should I say to the parents or carers of a young infant who express concern about anesthesia and the potential for long-term effects on the brain?</h3>
<p>There is no proven direct causal adverse effect of general anesthetics on human brain development. Recent reviews of the animal and clinical literature , and the outcome of the GAS study conclude that there is now strong evidence that short single exposure to anesthesia in early life is not associated with any long term significant measurable risk in humans. Some large population-based studies have found evidence for a small difference in tests of academic achievement and school readiness but the differences are small (for example, around 1% decrement in IQ) and this would not have a noticeable impact on the child. Any added risk of anesthesia and surgery is up to 10 times less than other factors such as gender or maternal education. Some studies have found evidence of an association between surgery and anesthesia in early life and increased risk of behavioral disorder or learning disability but the added risk is very small.</p>
<p><strong>The central points to explain and emphasize are that:</strong> - the surgery or procedure is only being scheduled because it is necessary - surgery cannot be safely performed without adequate anesthesia and analgesia - most anaesthetics in children are of short duration - all babies and children are closely monitored during anesthesia and surgery to maximize safety and minimize side- effects - the aim is to provide careful management of pediatric anesthesia by trained personnel within a safe environment respecting the rights of the child (see Rights of the Child, Competence, Quality) - there are currently no data to indicate that a single, well conducted anesthetic of short duration causes long-term changes in brain development - experimental data and measures used in animals cannot be extrapolated to indicate long-term effects in human infants</p>
</section>
<section id="if-i-am-called-to-anesthetize-a-young-infant-should-i-instigate-a-discussion-about-long-term-effects-of-anesthesia-on-the-developing-brain" class="level3">
<h3 class="anchored" data-anchor-id="if-i-am-called-to-anesthetize-a-young-infant-should-i-instigate-a-discussion-about-long-term-effects-of-anesthesia-on-the-developing-brain">If I am called to anesthetize a young infant should I instigate a discussion about long-term effects of anesthesia on the developing brain?</h3>
<p>This depends on the medicolegal approach to disclosure of risks in your country. It is important to do this in an open and non-alarming way and to give reassurance that for all the common risks and potential adverse effects, measures are taken to prevent or minimize these. Rare risks should be mentioned in context and related to risks of everyday life. There may be specific risks for an individual child due to young age, past history, comorbidities, complexity of the surgery or invasiveness of the anesthetic procedure and these should be identified and included in the discussion.</p>
</section>
<section id="should-i-alter-my-current-anesthesia-practice-in-response-to-the-current-evidence-base-information-or-other-published-statements" class="level3">
<h3 class="anchored" data-anchor-id="should-i-alter-my-current-anesthesia-practice-in-response-to-the-current-evidence-base-information-or-other-published-statements">Should I alter my current anesthesia practice in response to the current evidence base information or other published statements?</h3>
<p>There is currently no evidence to support one particular anesthetic technique or drug regimen that has beneﬁt over another in terms of reducing the potential effects of anesthesia on the infant brain. In addition, changing anesthesia practice from a familiar to an unfamiliar technique can itself introduce risk. Trials have begun of new techniques involving agents with neuroprotective properties but results will not be available for some time.</p>
</section>
<section id="is-repeated-exposure-or-long-duration-exposure-to-anesthetic-agents-more-harmful-than-short--duration-single-exposure" class="level3">
<h3 class="anchored" data-anchor-id="is-repeated-exposure-or-long-duration-exposure-to-anesthetic-agents-more-harmful-than-short--duration-single-exposure">Is repeated exposure or long duration exposure to anesthetic agents more harmful than short- duration single exposure?</h3>
<p>There is only extremely weak human evidence to support the FDA warning that repeated or lengthy use of anesthetic drugs may affect the development of children’s brains. Current data on multiple exposures or longer-term exposures are unsuitable to answer this question at this time and unlikely to be resolved in the future. Evidence from both epidemiological and prospective studies indicates that a single exposure to anesthesia of an hour is safe in terms of brain development. The epidemiological studies carried out so far have not shown major adverse effects on the infant brain that can be speciﬁcally related to anesthesia. Infants who need multiple anesthetics or those who require complex surgery and anesthesia of long duration usually have additional comorbidities that can affect development.</p>
</section>
<section id="if-parents-still-remain-unsure-or-are-concerned-about-providing-consent-for-anesthesia-and-surgery-what-should-i-do" class="level3">
<h3 class="anchored" data-anchor-id="if-parents-still-remain-unsure-or-are-concerned-about-providing-consent-for-anesthesia-and-surgery-what-should-i-do">If parents still remain unsure or are concerned about providing consent for anesthesia and surgery, what should I do?</h3>
<p>In the rare case when parents or carers remain sufficiently concerned to withhold consent for elective procedures, it may be necessary to organize a further discussion with all the relevant disciplines, to discuss the beneﬁts of the procedure/surgery and risks of delay. This may result in postponement for cases that are not urgent. Emergency or urgent surgery may still need to take place, and risks associated with delay clearly outweigh the theoretical issues about anesthesia on long-term cognitive development.</p>
</section>
<section id="what-can-i-do-to-improve-the-quality-of-my-care" class="level3">
<h3 class="anchored" data-anchor-id="what-can-i-do-to-improve-the-quality-of-my-care">What can I do to improve the quality of my care?</h3>
<p>There are many excellent resources that summarize quality improvement science and give examples of quality improvement in anesthesia and perioperative care, including pediatric practice:</p>
<ul>
<li>Raising the Standard: a compendium of audit recipes (3rd edition) 2012. Royal Collage of Anesthetists.</li>
<li>Audit Recipe Book: Section 9, Paediatrics (2012). Royal Collage of Anesthetists.</li>
<li>see also Quality Improvement</li>
</ul>
</section>
<section id="if-children-or-parents-ask-for-more-information-about-anesthesia-and-analgesia-where-should-they-go" class="level3">
<h3 class="anchored" data-anchor-id="if-children-or-parents-ask-for-more-information-about-anesthesia-and-analgesia-where-should-they-go">If children or parents ask for more information about anesthesia and analgesia, where should they go?</h3>
<ul>
<li>see content for Parents</li>
</ul>
<hr>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>